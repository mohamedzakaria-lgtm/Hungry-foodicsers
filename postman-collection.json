{
  "info": {
    "name": "Hungry Foodicsers API",
    "description": "API collection for Foodics office food ordering app",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "officeId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "itemId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"test@foodics.com\",\n  \"password\": \"password123\",\n  \"office\": \"{{officeId}}\"\n}",
              "description": "Office is optional - can be set later using PUT /api/auth/office"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.token) {",
                  "        pm.collectionVariables.set('token', jsonData.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ahmed@foodics.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            }
          }
        },
        {
          "name": "Update Firebase Token",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"YOUR_FIREBASE_FCM_TOKEN_HERE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/firebase-token",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "firebase-token"]
            }
          }
        },
        {
          "name": "Update Office",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"office\": \"{{officeId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/office",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "office"]
            },
            "description": "Update user's office. Useful if user registered without office or wants to change office."
          }
        },
        {
          "name": "Google OAuth - Initiate Login",
          "request": {
            "method": "GET",
            "header": [],
            "description": "Initiates Google OAuth login. This will redirect to Google's login page. In Postman, you'll see a redirect response. In a browser, this will open Google login.",
            "url": {
              "raw": "{{baseUrl}}/api/auth/google",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "google"]
            }
          }
        },
        {
          "name": "Google OAuth - Complete Registration",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.token) {",
                  "        pm.collectionVariables.set('token', jsonData.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"googleId\": \"123456789\",\n  \"email\": \"user@foodics.com\",\n  \"name\": \"John Doe\",\n  \"office\": \"{{officeId}}\",\n  \"profilePicture\": \"https://lh3.googleusercontent.com/a/default-user\"\n}"
            },
            "description": "Complete Google OAuth registration for new users (Web flow). This is called after user selects their office. Use the data from Google OAuth callback.",
            "url": {
              "raw": "{{baseUrl}}/api/auth/google/complete",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "google", "complete"]
            }
          }
        },
        {
          "name": "Google OAuth - Mobile (React Native)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.token) {",
                  "        pm.collectionVariables.set('token', jsonData.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"idToken\": \"GOOGLE_ID_TOKEN_FROM_MOBILE_APP\",\n  \"office\": \"{{officeId}}\"\n}",
              "description": "For React Native apps. Get ID token using @react-native-google-signin/google-signin, then send it here. Office is optional."
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/google/mobile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "google", "mobile"]
            },
            "description": "Authenticate with Google ID token from mobile app (React Native). Use this endpoint instead of the web redirect flow. Get ID token using @react-native-google-signin/google-signin library."
          }
        }
      ]
    },
    {
      "name": "Offices",
      "item": [
        {
          "name": "Get All Offices",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/offices",
              "host": ["{{baseUrl}}"],
              "path": ["api", "offices"]
            },
            "description": "Public endpoint - no authentication required. Users can see offices before registering."
          }
        },
        {
          "name": "Get Office by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/offices/{{officeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "offices", "{{officeId}}"]
            }
          }
        },
        {
          "name": "Create Office",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"New Office\",\n  \"location\": \"Location\",\n  \"city\": \"City\",\n  \"country\": \"Country\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/offices",
              "host": ["{{baseUrl}}"],
              "path": ["api", "offices"]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Users in Office",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/office/{{officeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "office", "{{officeId}}"]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", ":id"]
            }
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.order && jsonData.data.order._id) {",
                  "        pm.collectionVariables.set('orderId', jsonData.data.order._id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurant\": \"KFC\",\n  \"restaurantPhone\": \"+201234567890\",\n  \"notes\": \"Please be quick!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            }
          }
        },
        {
          "name": "Get All Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            }
          }
        },
        {
          "name": "Get Orders by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders?status=open",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"],
              "query": [
                {
                  "key": "status",
                  "value": "open"
                }
              ]
            }
          }
        },
        {
          "name": "Get My Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "my"]
            },
            "description": "Get all orders where the current user has items. Shows only the user's items in each order."
          }
        },
        {
          "name": "Get My Orders by Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/my?status=delivered",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "my"],
              "query": [
                {
                  "key": "status",
                  "value": "delivered"
                }
              ]
            },
            "description": "Get user's orders filtered by status (open, ordered, delivered, cancelled)"
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}"]
            }
          }
        },
        {
          "name": "Add Item to Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.item && jsonData.data.item._id) {",
                  "        pm.collectionVariables.set('itemId', jsonData.data.item._id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Chicken Bucket\",\n  \"quantity\": 2,\n  \"notes\": \"Extra spicy please\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "items"]
            }
          }
        },
        {
          "name": "Update Item Price",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 150.50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/items/{{itemId}}/price",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "items", "{{itemId}}", "price"]
            }
          }
        },
        {
          "name": "Update Order Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"ordered\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            }
          }
        },
        {
          "name": "Mark Order as Delivered",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"delivered\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            }
          }
        },
        {
          "name": "Remove Item from Order",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/items/{{itemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "items", "{{itemId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Order Groups",
      "item": [
        {
          "name": "Create Order Group",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Ftar\",\n  \"restaurant\": \"Local Bakery\",\n  \"restaurantPhone\": \"+201234567890\",\n  \"schedule\": {\n    \"daysOfWeek\": [1, 2, 3, 4, 5],\n    \"startTime\": \"09:00\",\n    \"endTime\": \"10:00\",\n    \"timezone\": \"Africa/Cairo\"\n  },\n  \"defaultNotes\": \"Daily breakfast order\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/order-groups",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups"]
            },
            "description": "Create a recurring order group. Days: 0=Sunday, 1=Monday, ..., 6=Saturday"
          }
        },
        {
          "name": "Get All Order Groups",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/order-groups",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups"]
            }
          }
        },
        {
          "name": "Get Active Order Groups",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/order-groups?active=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups"],
              "query": [
                {
                  "key": "active",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Get My Order Groups",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/order-groups/my",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups", "my"]
            }
          }
        },
        {
          "name": "Get Order Group by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/order-groups/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups", ":id"]
            }
          }
        },
        {
          "name": "Update Order Group",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"isActive\": true,\n  \"schedule\": {\n    \"startTime\": \"09:30\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/order-groups/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups", ":id"]
            }
          }
        },
        {
          "name": "Pause Order Group",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/order-groups/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups", ":id"]
            },
            "description": "Temporarily pause a recurring order group"
          }
        },
        {
          "name": "Delete Order Group",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/order-groups/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "order-groups", ":id"]
            },
            "description": "Permanently delete an order group"
          }
        }
      ]
    }
  ]
}
